[
  {
    "suite": "Leads - Ana Akışlar",
    "cases": [
      {
        "external_id": "CRM-LEADS-201",
        "title": "Kişi Ekle paneliyle yeni kişi oluşturma",
        "description": "/leads sayfasından yeni bir kişi açmanın, gerekli alanları doldurmanın ve kaydın tabloya yansımasının doğrulanması.",
        "steps": [
          {
            "action": "Kişi Yönetimi sayfasını açın ve sağ üstteki \"Kişi Ekle\" butonuna tıklayın.",
            "expected_result": "\"Yeni Kişi Ekle\" başlıklı kaydırmalı panel açılır."
          },
          {
            "action": "Ad, e-posta, telefon ve durum gibi zorunlu alanları Türkçe ipuçlarını takip ederek doldurun.",
            "expected_result": "Alanların altında kırmızı uyarı görünmez ve \"Kişi Oluştur\" butonu aktif hale gelir."
          },
          {
            "action": "\"Kişi Oluştur\" butonuna basın ve panel kapanana kadar bekleyin.",
            "expected_result": "Yeşil bildirim \"Kişi başarıyla oluşturuldu\" mesajını gösterir ve panel kapanır."
          },
          {
            "action": "Tabloyu üstten yenileyin veya sıralamayı güncelleyin.",
            "expected_result": "Yeni kişi satırı oluşturulma zamanı sayesinde listenin üstüne gelir ve seçilebilir durumdadır."
          }
        ],
        "expected_result": "Kullanıcı, aynı panelde tüm zorunlu alanları tamamlayarak yeni bir kişiyi listeye ekleyebilir."
      },
      {
        "external_id": "CRM-LEADS-202",
        "title": "Kişi Detayları kartında temel bilgileri düzenleme",
        "description": "Kişi detay sayfasındaki \"Kişi Bilgileri\" kartından ad, e-posta veya telefon alanlarının satır içi düzenlenmesi.",
        "steps": [
          {
            "action": "Listenin herhangi bir satırına tıklayarak kişi detay sayfasını açın.",
            "expected_result": "Sayfanın sol tarafında \"Kişi Bilgileri\" kartı görüntülenir."
          },
          {
            "action": "Kartta \"E-posta\" satırının üzerine gelin ve görünen kalem ikonuna tıklayın.",
            "expected_result": "Satır düzenleme moduna geçer ve alan içinde metin düzenlenebilir hale gelir."
          },
          {
            "action": "Yeni bir e-posta adresi yazıp Enter tuşuna basın veya küçük onay butonunu seçin.",
            "expected_result": "Satır normal görünüme döner, alan yeni değerle güncellenir ve kısa süreli bir başarı bildirimi görünür."
          },
          {
            "action": "Sayfayı yenileyin.",
            "expected_result": "Kişi bilgisi aynı güncel değerle yüklenir; değişiklik kalıcıdır."
          }
        ],
        "expected_result": "Kişi Detayları kartındaki her satır, kalem ikonu aracılığıyla doğrudan düzenlenebilir ve güncellemeler hemen saklanır."
      },
      {
        "external_id": "CRM-LEADS-203",
        "title": "Kişi durumunu değiştirme",
        "description": "Kişi başlığının yanındaki durum rozetinden veya hızlı aksiyon butonlarından yeni bir statü seçilmesi.",
        "steps": [
          {
            "action": "Kişi detay sayfasında adın yanında yer alan renkli durum rozetine tıklayın.",
            "expected_result": "Tüm durumların listelendiği küçük bir seçim menüsü açılır."
          },
          {
            "action": "Listeden farklı bir durum (ör. \"Tamamlandı\") seçin veya üst menüde gösteriliyorsa aynı ada sahip hızlı butona basın.",
            "expected_result": "Rozet yeni rengi ve etiketiyle güncellenir; üstte kısa bir bilgi mesajı görünür."
          },
          {
            "action": "Aktivite bölümünü kontrol edin.",
            "expected_result": "Zaman çizelgesine durum değişikliğini anlatan otomatik bir satır eklenmiştir."
          }
        ],
        "expected_result": "Durum değişiklikleri tek tıklamayla yapılabilir, hem rozet hem de aktivite kaydı yeni değeri gösterir."
      },
      {
        "external_id": "CRM-LEADS-204",
        "title": "Potansiyel müşteri için yeni proje oluşturma",
        "description": "\"Projeler\" kartındaki \"Proje Ekle\" akışının çalıştığını ve kartta yeni projenin listelendiğini doğrular.",
        "steps": [
          {
            "action": "Kişi detay sayfasında \"Projeler\" kartına gidin ve \"Proje Ekle\" butonuna tıklayın.",
            "expected_result": "Proje oluşturma sihirbazı (yan panel) açılır."
          },
          {
            "action": "Zorunlu alanlara (proje adı, tür, tarih vb.) uygun değerler girip adımları tamamlayın.",
            "expected_result": "Sihirbazın her adımı başarıyla geçilir ve son adımda \"Kaydet\" butonu aktif olur."
          },
          {
            "action": "Sihirbazı tamamlayıp kapanmasını bekleyin.",
            "expected_result": "Yeşil mesaj \"Proje başarıyla oluşturuldu\" ibaresini gösterir."
          },
          {
            "action": "\"Projeler\" kartını yeniden kontrol edin.",
            "expected_result": "Yeni proje kartları listesine eklenmiş ve varsayılan olarak aktif bölümde görünmektedir."
          }
        ],
        "expected_result": "Kişiden bağımsız yeni proje kaydı açılır ve aynı kart altında hemen görüntülenir."
      },
      {
        "external_id": "CRM-LEADS-205",
        "title": "Aktif ve arşivli projeleri yönetme",
        "description": "\"Arşivleri Göster\" anahtarı ile aktif projeler ile geçmiş projeler arasında geçiş yapılabildiğini doğrular.",
        "steps": [
          {
            "action": "En az bir projenin arşivlenmiş durumda olduğundan emin olun (proje detay sayfasından arşivlenmiş statüye taşıyın).",
            "expected_result": "\"Projeler\" kartında \"Arşivleri Göster\" anahtarı görünür hale gelir."
          },
          {
            "action": "\"Arşivleri Göster\" anahtarını açın.",
            "expected_result": "Kartın altında \"Arşivlenmiş Projeler\" başlıklı ek bir liste belirir ve geçmiş projeler burada gösterilir."
          },
          {
            "action": "Aynı anahtarı tekrar kapatın.",
            "expected_result": "Arşivlenmiş bölüm gizlenir, aktif projeler listesi etkilenmez."
          }
        ],
        "expected_result": "Kullanıcı tek bir anahtarla aktif ve geçmiş projeler arasında görünüm değiştirebilir."
      },
      {
        "external_id": "CRM-LEADS-206",
        "title": "Aktivite bölümünde not ekleme",
        "description": "\"Aktivite\" kartındaki \"Not\" formuyla hızlıca not eklenmesini doğrular.",
        "steps": [
          {
            "action": "\"Aktivite\" kartında \"Not\" başlığı altındaki metin kutusuna kısa bir yorum yazın.",
            "expected_result": "Kutunun altındaki \"Not Ekle\" butonu aktif olur."
          },
          {
            "action": "\"Not Ekle\" butonuna basın.",
            "expected_result": "Buton kısa süreli \"Kaydediliyor...\" durumuna geçer."
          },
          {
            "action": "Zaman çizelgesinin en üstüne bakın.",
            "expected_result": "Az önce girilen içerik tarih/ saat etiketiyle ilk satıra eklenmiştir."
          }
        ],
        "expected_result": "Kullanıcılar birkaç saniye içinde yeni not girip kronolojik akışta görebilir."
      },
      {
        "external_id": "CRM-LEADS-207",
        "title": "Hatırlatıcı kurup takvimden tarih/saat seçme",
        "description": "Aktivite formundaki \"Hatırlatıcı Kur?\" anahtarıyla tarih/saat seçicisinin çalıştığını doğrular.",
        "steps": [
          {
            "action": "\"Not\" formunda \"Hatırlatıcı Kur?\" anahtarını açın.",
            "expected_result": "\"Tarih ve Saat\" alanı ve takvim ikonları görünür."
          },
          {
            "action": "Tarih alanına tıklayıp açılan mini takvimden gelecekteki bir gün seçin, ardından saat listesinden uygun bir saat belirleyin.",
            "expected_result": "Alan seçtiğiniz tarih ve saati DD.AA.YYYY HH:MM formatında gösterir."
          },
          {
            "action": "Hatırlatma metnini yazıp \"Hatırlatıcı Ekle\" butonuna basın.",
            "expected_result": "Zaman çizelgesine alarm ikonu olan yeni bir satır eklenir ve seçilen tarih/saat etiketi görünür."
          }
        ],
        "expected_result": "Hatırlatıcılar takvim seçimleriyle birlikte kaydedilir ve zaman çizelgesinde açıkça gösterilir."
      },
      {
        "external_id": "CRM-LEADS-270",
        "title": "Lead aktivitelerinde hatırlatıcı kartı rozetleri ve tamamla/geri al",
        "description": "Lead detayındaki Aktivite zaman çizelgesinde yeni hatırlatıcı kartlarının durum rozetleri ve aksiyon butonlarıyla doğru çalıştığını doğrular.",
        "steps": [
          {
            "action": "Kişi detay sayfasında Aktivite kartının \"Aktivite\" segmentini açık tutun; tarihli bir hatırlatıcı yoksa yukarıdaki formdan bugün veya yarın için bir hatırlatıcı ekleyin.",
            "expected_result": "Zaman çizelgesinde hatırlatıcı içeriği, \"Gecikmiş/Bugün/Yarın\" rozetlerinden biri ve altında \"Kişi: <isim>\" ile saat bilgisiyle görünür."
          },
          {
            "action": "Karttaki renkli durum rozetini ve saat satırını inceleyin.",
            "expected_result": "Tarih bugüne denkse \"Bugün\", yarına denkse \"Yarın\", geçmişse kırmızı \"Gecikmiş\" rozeti görünür; saat alanı HH:MM formatında veya \"Saat belirlenmemiş\" metniyle dolar."
          },
          {
            "action": "Aynı kartta yer alan \"Tamamlandı olarak işaretle\" butonuna tıklayın.",
            "expected_result": "Kart soluklaşır, başlık üstünde yeşil \"Tamamlandı\" rozeti görünür ve içerik üzerine strikethrough uygulanır."
          },
          {
            "action": "Beliren \"Tamamlanmadı olarak işaretle\" butonuna basın.",
            "expected_result": "Kart tekrar aktif hale gelir, durum rozeti önceki değerine döner ve herhangi bir sayfa yenilemesi gerekmez."
          }
        ],
        "expected_result": "Lead aktivite kartındaki hatırlatıcı bileşenleri tarih temelli rozetleri gösterir ve tamamla/geri al aksiyonlarıyla anında güncellenir."
      },
      {
        "external_id": "CRM-LEADS-271",
        "title": "Projeye bağlı hatırlatıcıdan proje sheet'ini açma",
        "description": "Lead detayındaki \"Proje aktiviteleri\" bölümünde görünen hatırlatıcıların ilgili projeyi sheet olarak açtığını doğrular.",
        "steps": [
          {
            "action": "Lead ile ilişkili bir projede (gerekirse projeyi açıp Aktivite formundan hatırlatıcı ekleyin) tarihli bir hatırlatıcı oluşturun ve kişi detayındaki Aktivite kartına geri dönün.",
            "expected_result": "\"Proje aktiviteleri\" başlığı altında ilgili hatırlatıcı, proje adını gri rozet olarak ve alt bölümde \"Projeyi aç\" butonunu gösterir."
          },
          {
            "action": "\"Projeyi aç\" butonuna tıklayın.",
            "expected_result": "Sağdan ProjectSheetView kayan paneli açılır; proje adı, statüsü ve sekme menüsü panelde görünür."
          },
          {
            "action": "Sheet'i sağ üstteki kapatma ikonuyla kapatın.",
            "expected_result": "Panel kapanır, lead detayındaki Aktivite listesi aynı scroll konumunda kalır ve seçili hatırlatıcı hala vurgulanır."
          }
        ],
        "expected_result": "Projeye bağlı hatırlatıcı kartları tek tıkla ilgili projeyi sheet olarak açar ve lead sayfasından ayrılmadan projeyi yönetmeye izin verir."
      },
      {
        "external_id": "CRM-LEADS-208",
        "title": "Seans Ekle butonuyla takvimden tarih seçerek seans planlama",
        "description": "Kişi başlığındaki \"Seans Ekle\" düğmesinden açılan planlama sihirbazının tarih/saat seçimlerini kaydettiğini doğrular.",
        "steps": [
          {
            "action": "Kişi detay sayfasının üst kısmındaki \"Seans Ekle\" (takvim ikonlu) butonuna tıklayın.",
            "expected_result": "Seans planlama paneli yan tarafta açılır."
          },
          {
            "action": "Paneldeki tarih alanına tıklayın, takvimden uygun günü seçin ve saat seçicisinden bir zaman belirleyin.",
            "expected_result": "Seçilen tarih ve saat üst adıma taşınır; panel ilerleme göstergesi dolmaya devam eder."
          },
          {
            "action": "Gerekli diğer alanları (proje seçimi, notlar vb.) doldurup planlamayı tamamlayın.",
            "expected_result": "Panel \"Seans Ekle\" düğmesiyle kapanır, üstte \"Seansınız takvime eklendi\" mesajı çıkar."
          },
          {
            "action": "Kişi başlığındaki \"Seanslar\" bölümünü kontrol edin.",
            "expected_result": "Yeni seans sayacı artar ve kartta yaklaşan tarih çip olarak görüntülenir."
          }
        ],
        "expected_result": "Seans planlama sihirbazı, takvimden seçilen tarih/saat ile kayıt oluşturur ve kişi özetine yansıtır."
      },
      {
        "external_id": "CRM-LEADS-242",
        "title": "Lead detay sekme navigasyonu başlıkları gizlemez",
        "description": "Genel Bakış / Projeler / Aktivite sekmelerine tıklandığında sticky barın hedef başlıkları kapatmadan kaydırdığını doğrular.",
        "steps": [
          {
            "action": "Herhangi bir /leads/:id sayfasını açın ve üstteki sekme çubuğundan \"Projeler\" seçeneğine tıklayın.",
            "expected_result": "Sayfa projeler bölümüne kayar ve \"Projeler\" kart başlığı sticky barın hemen altında tamamen görünür."
          },
          {
            "action": "Aynı çubuktan \"Aktivite\" sekmesine tıklayın.",
            "expected_result": "\"Aktivite\" başlığı blur/şeffaf alanın altında kalmaz, sticky nav kaydırma boyunca ekranın üstüne yapışık kalır."
          },
          {
            "action": "\"Genel Bakış\" sekmesine dönün.",
            "expected_result": "Sayfa üst kısma yumuşak şekilde kayar; header ve sekme çubuğu arasında boşluk oluşmaz ve en üstteki kartlar tamamen görünür."
          }
        ],
        "expected_result": "Sekmeler hangi bölüm seçilirse seçilsin başlıkları gizlemeden doğru konuma kaydırır ve sticky çubuk her zaman görünür kalır."
      },
      {
        "external_id": "CRM-LEADS-209",
        "title": "Durum filtresi ile listeyi daraltma ve sıfırlama",
        "description": "/leads tablosundaki filtre panelinin durumlara göre sonuçları sınırladığını ve kolayca sıfırlanabildiğini doğrular.",
        "steps": [
          {
            "action": "Kişi Yönetimi sayfasında üstteki \"Filtreler\" butonuna tıklayın.",
            "expected_result": "Sağ tarafta filtre paneli açılır ve durum seçenekleri listelenir."
          },
          {
            "action": "\"Durum\" bölümünden en az iki seçenek işaretleyip paneli kapatın.",
            "expected_result": "Tablonun üstünde turuncu \"2 aktif filtre\" etiketi görünür ve sadece seçilen durumlara sahip kişiler listelenir."
          },
          {
            "action": "Tablonun üst kısmındaki \"Filtreleri sıfırla\" bağlantısına tıklayın.",
            "expected_result": "Aktif filtre etiketi kaybolur ve tablo tüm kişileri tekrar gösterir."
          }
        ],
        "expected_result": "Filtre paneliyle seçilen durumlar tabloya anında uygulanır, tek tıkla sıfırlanarak eski haline döner."
      },
      {
        "external_id": "CRM-LEADS-210",
        "title": "Excel'e Aktar butonuyla veri dışa aktarma",
        "description": "Filtrelenmiş kişilerin Excel dosyası olarak indirilebildiğini doğrular.",
        "steps": [
          {
            "action": "İsteğe bağlı olarak küçük bir filtre veya arama uygulayın.",
            "expected_result": "Tablo yalnızca seçili kriterle eşleşen kayıtları gösterir."
          },
          {
            "action": "Üstteki \"Excel'e aktar\" butonuna tıklayın.",
            "expected_result": "Buton kısa süreli yüklenme durumuna geçer."
          },
          {
            "action": "Ekranın sağ alt köşesindeki bildirimleri takip edin.",
            "expected_result": "Yeşil bildirim \"Filtrelenen kişiler indirildi\" mesajını gösterir ve tarayıcı otomatik olarak .xlsx dosyası indirir."
          }
        ],
        "expected_result": "Kullanıcı uyguladığı filtrelerle eşleşen listeyi tek tıkla Excel formatında indirebilir."
      },
      {
        "external_id": "CRM-LEADS-211",
        "title": "Aktivite zaman çizelgesinde Geçmiş sekmesini inceleme",
        "description": "Kişi detay sayfasındaki Aktivite kartında \"Aktivite\" ve \"Geçmiş\" segmentleri arasında geçiş yapılabildiğini doğrular.",
        "steps": [
          {
            "action": "Kişi detay sayfasında aşağı kaydırarak \"Aktivite\" kartını bulun.",
            "expected_result": "Kartta \"Aktivite\" ve \"Geçmiş\" etiketli iki sekme düğmesi görünür."
          },
          {
            "action": "\"Geçmiş\" sekmesine tıklayın.",
            "expected_result": "Zaman çizelgesi sistem değişikliklerini (ör. alan güncellemeleri) kronolojik olarak listeler."
          },
          {
            "action": "Yeniden \"Aktivite\" sekmesine dönün.",
            "expected_result": "Kart, kullanıcı notları ve hatırlatıcıları içeren standart görünümüne geri döner."
          }
        ],
        "expected_result": "Aktivite kartı iki farklı görünümü arasında sorunsuz geçiş yaparak hem manuel notları hem de sistem geçmişini inceleme imkânı verir."
      },
      {
        "external_id": "CRM-LEADS-212",
        "title": "Ayarlar’da eklenen lead durumunu detay kartından kullanma",
        "description": "Leads ayarlarında oluşturulan yeni durumun kişi başlığındaki rozet menüsüne ve tablo filtrelerine yansımasını doğrular.",
        "steps": [
          {
            "action": "Ayarlar > Potansiyel Müşteriler sayfasında 'Durum ekle' altlığını açın.",
            "expected_result": "İsim, renk ve yaşam döngüsü alanları bulunan küçük form görünür."
          },
          {
            "action": "İsim alanına benzersiz bir statü (ör. 'Atölye Bekliyor') yazın, renk seçip kaydedin.",
            "expected_result": "Toast başarı mesajı gösterir ve yeni durum listede görünür."
          },
          {
            "action": "/leads sayfasına dönüp herhangi bir kişiyi açın.",
            "expected_result": "Başlığın yanındaki durum rozetine tıkladığınızda açılan menüde yeni statü listelenir."
          },
          {
            "action": "Yeni statüyü seçip onaylayın.",
            "expected_result": "Rozet yeni renge döner, Aktivite kartına statü değişikliği kaydı eklenir."
          },
          {
            "action": "Kişi listesini tekrar açıp \"Durum\" filtresi panelini kontrol edin.",
            "expected_result": "Yeni statü seçim listesinde görünür ve tablo ilgili kişiyi bu statü ile gösterir."
          }
        ],
        "expected_result": "Lead ayarlarında eklenen statüler kişi detay başlığında seçilebilir ve hem filtrelerde hem listede yeni etiketle görüntülenir."
      },
      {
        "external_id": "CRM-LEADS-213",
        "title": "Kişi listesindeki lazy load davranışı",
        "description": "/leads sayfasında 25’ten fazla kayıt olduğunda aşağı kaydırıldıkça yeni sayfanın otomatik yüklendiğini doğrular.",
        "steps": [
          {
            "action": "Kişi liste sayfasını açın ve filtre kullanmadan aşağı kaydırın.",
            "expected_result": "Tablonun altında gri bir boşluk ve küçük bir yükleme göstergesi alanı görünür."
          },
          {
            "action": "Sayfanın en altına gelmeye devam edin veya Page Down tuşunu birkaç kez basın.",
            "expected_result": "Yükleme göstergesi döner ve kısa süre sonra tabloya yeni kişi satırları eklenir."
          },
          {
            "action": "Toplam satır sayısını not alın ve yeniden alta kaydırın.",
            "expected_result": "Her yüklemede satır sayısı artar; aynı davranış tekrarlandıkça veriler sayfa yenilemesi olmadan çekilir."
          }
        ],
        "expected_result": "Kişi listesi sonsuz kaydırma ile veri sayısı arttıkça yeni sayfaları otomatik getirir."
      },
      {
        "external_id": "CRM-LEADS-230",
        "title": "Kişi Ekle sheet'inde NavigationGuard seçenekleri",
        "description": "Yeni kişi paneli kirliyken kapanmaya çalışıldığında Kal / Kaydet ve Çık / Değişiklikleri İptal Et akışının çalıştığını doğrular.",
        "steps": [
          {
            "action": "Leads listesinde 'Kişi Ekle' butonuna tıklayın.",
            "expected_result": "'Yeni Kişi Ekle' sheet'i açılır."
          },
          {
            "action": "Ad ve Not alanlarına veri girin fakat kaydetmeyin.",
            "expected_result": "Footer’daki 'Kişi Oluştur' butonu aktif kalır ve sheet kirlenir."
          },
          {
            "action": "Sheet’i kapatmak için çarpı ikonuna basın.",
            "expected_result": "'Kaydedilmemiş değişiklikleriniz var' başlıklı NavigationGuard diyalogu üç seçenekle görünür."
          },
          {
            "action": "'Kal' seçeneğini tıklayın.",
            "expected_result": "Sheet açık kalır ve girdiğiniz veriler silinmez."
          },
          {
            "action": "Tekrar kapatmayı deneyin ve bu defa 'Kaydet ve Çık' butonuna basın.",
            "expected_result": "Form valid ise kişi kaydedilir, sheet kapanır ve yeşil toast başarı mesajı gösterir."
          }
        ],
        "expected_result": "AddLeadDialog kazara kapanışları engeller; kullanıcı kalabilir, kaydedip çıkabilir veya değişiklikleri iptal edebilir."
      },
      {
        "external_id": "CRM-LEADS-231",
        "title": "Kişiyi düzenle panelinde kirli kapanış uyarısı",
        "description": "Mevcut kişiyi düzenlerken değişiklik yapıp çıkmak istediğinizde NavigationGuard’ın Kal / Değişiklikleri İptal Et seçeneklerini sunduğunu doğrular.",
        "steps": [
          {
            "action": "Herhangi bir lead’in satırından veya detay sayfasından 'Kişiyi Düzenle' sheet’ini açın.",
            "expected_result": "'Kişiyi Düzenle' başlıklı form mevcut değerlerle yüklenir."
          },
          {
            "action": "Ad veya telefon alanını değiştirin.",
            "expected_result": "Sheet kirlenir; 'Kaydet' butonu aktif kalır."
          },
          {
            "action": "Sheet’i kapatmak için 'İptal' butonuna basın.",
            "expected_result": "'Kaydedilmemiş değişiklikleriniz var' diyalogu sadece 'Kal' ve 'Değişiklikleri İptal Et' düğmeleriyle görünür (bu panelde 'Kaydet ve Çık' yoktur)."
          },
          {
            "action": "'Kal' butonunu seçin.",
            "expected_result": "Sheet açık kalır ve yaptığınız değişiklikler korunur."
          },
          {
            "action": "Tekrar kapatın ve bu defa 'Değişiklikleri İptal Et' butonuna basın.",
            "expected_result": "Sheet kapanır, lead kaydı eski değerleriyle kalır."
          }
        ],
        "expected_result": "EditLeadDialog kullanıcının izni olmadan kapanmaz; sadece net şekilde kalma veya değişiklikleri iptal etme seçenekleriyle sonlandırılır."
      },
      {
        "external_id": "CRM-LEADS-240",
        "title": "Lead statüleri otomatik kaydedilir ve diğer sekmede senkron görünür",
        "description": "/settings/leads sayfasında statü tercihleri için manuel \"Kaydet\" gerekmeden anlık kayıt ve arka plan senkronizasyonunu doğrular.",
        "steps": [
          {
            "action": "/settings/leads sayfasına gidin ve \"Lead Statüleri\" kartındaki \"Hızlı butonları göster\" anahtarını kapatıp tekrar açın.",
            "expected_result": "Her değişiklikte yeşil başarı toastı görünür, sticky save bar tetiklenmez."
          },
          {
            "action": "Aynı kartta özel statülerden birini sürükleyip farklı bir sıraya bırakın.",
            "expected_result": "Sürükle-bırak bırakıldığı anda \"Statü sırası güncellendi\" bildirimi gelir."
          },
          {
            "action": "İkinci bir tarayıcı sekmesinde veya pencerede /settings/leads sayfasını açın (manuel yenileme yapmayın, sadece sekmeye geçip ~60 sn bekleyin).",
            "expected_result": "Arka plan refetch tetiklenir ve ikinci sekmede de yeni statü sırası + hızlı buton tercihi görünür."
          }
        ],
        "expected_result": "Lead statü ayarları her etkileşimde otomatik kaydolur ve diğer sekmeler/cihazlar kısa süre sonra aynı halde görünür."
      },
      {
        "external_id": "CRM-LEADS-241",
        "title": "Lead alanları ekleme/düzenleme otomatik kaydedilir ve senkron olur",
        "description": "\"Lead Alanları\" kartında custom alanların anında kaydedilip diğer sekmelere refetch ile yansıdığını doğrular.",
        "steps": [
          {
            "action": "/settings/leads → Lead Alanları kartında \"Alan Ekle\" butonuna basın, zorunlu alanları doldurun ve kaydedin.",
            "expected_result": "Dialog kapanır, yeşil toast görünür ve yeni alan listede hemen belirir."
          },
          {
            "action": "Yeni alanın yanındaki üç nokta/menüden düzenleyip farklı bir label yazın, ardından kaydedin.",
            "expected_result": "Alan satırı hemen güncellenir; sticky save veya manuel yenileme gerekmez."
          },
          {
            "action": "Farklı bir sekmede aynı ayar sayfasını açın veya mevcut sekmeye geri dönüp ~1 dakika bekleyin.",
            "expected_result": "Arka plan sorgusu tetiklenir ve diğer sekmede de yeni alan + güncellenen label görünür."
          }
        ],
        "expected_result": "Lead alanları dialog üzerinden kaydedildiği anda kalıcıdır ve ekstra aksiyon olmadan diğer sekmelerde görünür hale gelir."
      },
      {
        "external_id": "CRM-LEADS-262",
        "title": "Lead detayında Seanslar bölümü ve projeye bağlama",
        "description": "Lead detay sayfasındaki yeni 'Seanslar' bölümünün projeye bağlı/bağlı olmayan seansları gösterdiğini ve karttan projeye bağlama akışını başlatabildiğini doğrular.",
        "steps": [
          {
            "action": "En az biri projeye bağlı olmayan iki seansa sahip bir lead'i açın.",
            "expected_result": "ProjectDetailsLayout içinde 'Projeler'den hemen sonra 'Seanslar' başlıklı yeni bir bölüm görünür."
          },
          {
            "action": "Seanslar bölümüne inin ve kart başlığını kontrol edin.",
            "expected_result": "Kartta takvim ikonu, toplam seans sayısı ve sağ üstte mor stilindeki 'Seans planla' butonu bulunur."
          },
          {
            "action": "Projeye bağlı olmayan seans satırını bulun.",
            "expected_result": "Satırda proje satırı 'Bağlı değil' bilgisini ve yanında 'Projeye bağla' bağlantısını gösterir."
          },
          {
            "action": "Bu bağlantıya tıklayın.",
            "expected_result": "Seans planlama sheet'i açılır ve doğrudan 'Proje' adımı aktif olur; lead bilgisi otomatik doludur."
          },
          {
            "action": "Sheet'i kapatıp listede herhangi bir seans satırına tıklayın.",
            "expected_result": "Sağdan SessionSheet açılır; kullanıcı tam seans detayına gitmek için 'Seansı görüntüle' aksiyonunu görebilir."
          }
        ],
        "expected_result": "Lead detayındaki Seanslar bölümü tüm seansları tek yerde listeler, projeye bağlama kısayolunu sunar ve satırlardan sheet açılmasına izin verir."
      },
      {
        "external_id": "CRM-LEADS-260",
        "title": "Freelance / KDV'siz profilde lead teklif sihirbazı KDV kontrollerini gizler",
        "description": "Freelance/no-VAT tüzel kişiliği seçildiğinde lead → proje/teklif sihirbazının hizmet kartlarında ve fatura ön izlemesinde KDV ayarlarını göstermediğini doğrular.",
        "steps": [
          {
            "action": "/settings/billing sayfasını açın ve \"Freelance / KDV'siz\" tüzel kişilik seçeneğini işaretleyin.",
            "expected_result": "Şirket bilgileri + KDV oranı alanları gizlenir, formda sadece bireysel bilgiler kalır."
          },
          {
            "action": "Son değişikliklerden emin olduktan sonra herhangi bir lead kartını açın ve üstteki \"Proje Oluştur\" veya \"Teklif Hazırla\" akışını başlatın.",
            "expected_result": "Sihirbaz açılır ve hizmet seçimi adımı varsayılan servis kartlarıyla yüklenir."
          },
          {
            "action": "Herhangi bir hizmet kartının aksiyonlarını açın (\"KDV'yi düzenle\" ya da \"KDV'yi özelleştir\" butonlarını arayın).",
            "expected_result": "Freelance modunda hiçbir kartta KDV anahtarı görünmez; fiyat alanı tek satırdır."
          },
          {
            "action": "Akışın fiyat özetine veya fatura ön izlemesine ilerleyin.",
            "expected_result": "Özet satırlarında KDV toplamı yer almaz, sadece ara toplam ve genel toplam gösterilir."
          }
        ],
        "expected_result": "Freelance/KDV'siz profilde hem hizmet düzenleyicilerinde hem de önizleme ekranında KDV'ye dair hiçbir kontrol veya tutar görünmez."
      },
      {
        "external_id": "CRM-LEADS-261",
        "title": "KDV'li tüzel kişiliğe geri dönünce builder KDV modlarını geri getirir",
        "description": "Şirket veya bireysel moduna geri dönüldüğünde lead → proje sihirbazının KDV modlarını tekrar sunup fiyatlara uyguladığını doğrular.",
        "steps": [
          {
            "action": "/settings/billing sayfasında tüzel kişiliği \"Şirket\" olarak değiştirin ve \"KDV fiyatlara dahil\" radiosunu seçili bırakın.",
            "expected_result": "KDV oranı + mod alanları tekrar görünür ve kaydetmeden sayfadan ayrıldığınızda otomatik olarak saklanır."
          },
          {
            "action": "Aynı lead üzerinde tekrar \"Proje Oluştur\" sihirbazını başlatın.",
            "expected_result": "Hizmet kartları bu kez sağ üstte \"KDV ayarlarını düzenle\" anahtarını gösterir."
          },
          {
            "action": "Bir hizmette KDV ayarlarını açın, modu \"KDV hariç\" yapın ve %18 oranı girin.",
            "expected_result": "Mod seçimi ve oran alanları görünür, değişiklikler hemen satır özetine yansır."
          },
          {
            "action": "Fatura ön izlemesini kontrol edin.",
            "expected_result": "Toplamda \"KDV (%18)\" satırı eklenir ve genel toplam bu vergi ile hesaplanır."
          }
        ],
        "expected_result": "KDV'li tüzel kişiliğe dönüldüğünde tüm builder adımları KDV modunu seçmeye izin verir ve ön izleme net olarak vergi satırını gösterir."
      }
    ]
  }
]
